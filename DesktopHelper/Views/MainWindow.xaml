<Window x:Class="DesktopHelper.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:DesktopHelper.ViewModels"
        Title="Desktop Task Aid"
        Height="600" Width="800"
        Background="#F0F0F0"
        MinHeight="700" MinWidth="650"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- TOP ROW -->
        <Grid Grid.Row="0" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- TabControl (Reminders & Import Cal) -->
            <TabControl Grid.Column="0" Margin="0,0,10,0">
                <TabItem Header="Reminders">
                    <Expander Header="Features" IsExpanded="False" Margin="10">
                        <StackPanel>
                            <CheckBox Content="Pull Mouse" Margin="5" FontSize="14"/>
                            <CheckBox Content="Drag Window" Margin="5" FontSize="14"/>
                        </StackPanel>
                    </Expander>
                </TabItem>
                <TabItem Header="Import Cal">
                    <StackPanel Margin="10">
                        <TextBlock Text=""  />
                    </StackPanel>
                </TabItem>
            </TabControl>

            <GroupBox Header="Focus Timer" Grid.Column="1" HorizontalAlignment="Center"
                      BorderBrush="#DDDDDD" BorderThickness="1" Padding="10"
                      MinWidth="350" MaxWidth="400" MinHeight="160">
                <Border Background="#FFFFFF" BorderBrush="#DDDDDD" BorderThickness="1"
                        CornerRadius="5" Padding="15">
                    <StackPanel>
                        <TextBlock Text="25:00" FontSize="48" FontWeight="Bold" Foreground="Black"
                                   HorizontalAlignment="Center" Margin="0,10"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
                            <Button Content="Start" Background="Black" Foreground="White"
                                    FontWeight="Bold" Width="80" Height="35" Margin="5"/>
                            <Button Content="Reset" Style="{StaticResource SecondaryButtonStyle}"
                                    Width="80" Height="35"/>
                            <Button Content="Settings" Style="{StaticResource SecondaryButtonStyle}"
                                    Width="80" Height="35"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </GroupBox>

            <ToggleButton Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right"
                          Margin="10" IsChecked="True" Style="{StaticResource ToggleSwitchStyle}"/>
        </Grid>

        <!-- MIDDLE ROW (TASK LIST + ADD BUTTON) -->
        <Grid Grid.Row="1" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <DataGrid x:Name="TaskListGrid"
                      Grid.Row="0"
                      HorizontalAlignment="Stretch"
                      Margin="30,0,30,5"
                      ItemsSource="{Binding Tasks}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      Height="120"
                      ScrollViewer.CanContentScroll="True"
                      ScrollViewer.VerticalScrollBarVisibility="Auto">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Task" Width="*" Binding="{Binding TaskName}"/>
                    <DataGridTextColumn Header="Due Date" Width="100" Binding="{Binding DueDate}"/>
                    <DataGridCheckBoxColumn Header="Reminders?" Width="80" Binding="{Binding HasReminder}"/>
                    <DataGridTemplateColumn Header="Actions" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Button Content="Edit" Style="{StaticResource SecondaryButtonStyle}"/>
                                    <Button Style="{StaticResource DeleteButtonStyle}" Width="30" Height="30"
                                            Command="{Binding DataContext.DeleteTaskCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}">
                                        <TextBlock FontFamily="Segoe MDL2 Assets"
                                                   Text="&#xE74D;"
                                                   FontSize="14"
                                                   Foreground="White"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"/>
                                    </Button>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

            <StackPanel Grid.Row="2" HorizontalAlignment="Center" Margin="0,10,0,10">
                <Button Content="Add" Style="{StaticResource PrimaryButtonStyle}" Width="80" Height="35"
                        Command="{Binding AddTaskCommand}"/>
            </StackPanel>
        </Grid>

        <!-- BOTTOM ROW (CALENDAR IMPORT) -->
        <Grid Grid.Row="2" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="White" CornerRadius="5" Padding="10"
                    Margin="0,0,10,0" BorderBrush="#DDDDDD" BorderThickness="1">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE787;" FontSize="16"
                                   FontWeight="Bold" Foreground="Black" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <TextBlock Text="Import Calendar" FontWeight="Bold" FontSize="16" VerticalAlignment="Center"/>
                    </StackPanel>
                    <Calendar />
                </StackPanel>
            </Border>

            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
                <TextBlock Text="Calendar URL:" VerticalAlignment="Center" Margin="0,0,10,0" FontSize="14"/>
                <TextBox Width="200" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <Button Content="Import" Style="{StaticResource PrimaryButtonStyle}" Width="80" Height="30"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
